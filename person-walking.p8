pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- person walking animation
-- by claude

-- player variables
player = {
  x = 64,
  y = 64,
  speed = 1,
  sprite = 16,
  flip_x = false,
  anim_timer = 0,
  anim_speed = 8,
  walking = false
}

function _init()
  -- initialize game
end

function _update()
  -- handle input and animation
  player.walking = false
  
  -- movement with arrow keys
  if btn(0) then -- left
    player.x -= player.speed
    player.flip_x = true
    player.walking = true
  end
  if btn(1) then -- right
    player.x += player.speed
    player.flip_x = false
    player.walking = true
  end
  if btn(2) then -- up
    player.y -= player.speed
    player.walking = true
  end
  if btn(3) then -- down
    player.y += player.speed
    player.walking = true
  end
  
  -- keep player on screen
  player.x = mid(4, player.x, 120)
  player.y = mid(4, player.y, 120)
  
  -- animate sprite when walking
  if player.walking then
    player.anim_timer += 1
    if player.anim_timer >= player.anim_speed then
      player.anim_timer = 0
      -- cycle through walking sprites (16-19)
      player.sprite += 1
      if player.sprite > 19 then
        player.sprite = 16
      end
    end
  else
    -- standing still sprite
    player.sprite = 16
    player.anim_timer = 0
  end
end

function _draw()
  -- clear screen
  cls(1) -- dark blue background
  
  -- draw ground
  rectfill(0, 100, 127, 127, 3) -- dark green ground
  
  -- draw player
  spr(player.sprite, player.x, player.y, 1, 1, player.flip_x)
  
  -- instructions
  print("use arrow keys to walk", 20, 5, 7)
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007007000070070000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000007700000077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000007700000077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007007000070070000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088000000880000008800000088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888800008888000088880000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08888880088888800888888008888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00f88f0000f88f0000f88f0000f88f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888800008888000088880000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888800008888000088880000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00808000008880000080080000088800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00909000009009000090900000900900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000